<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arbeidskrav 1!</title>
    <link rel="stylesheet" href="game.css" />
  </head>
  <!-- HTML KODEN TRENGER DU IKKE RØRE FOR Å LØSE OPPGAVENE. -->

  <body>
    <div class="main-container">
      <!-- Healthbars til heroene -->
      <div class="hero-health-containers">
        <div class="healthbar-container">
          <!-- healer-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar healer-health"></div>
          <div class="text-container">
            <p id="healer-name-txt">Healerens navn</p>
            <p id="healer-health-txt">400 / 400 HP</p>
          </div>
        </div>
        <div class="healthbar-container">
          <!-- archer-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar archer-health"></div>
          <div class="text-container">
            <p id="archer-name-txt">Archerens navn</p>
            <p id="archer-health-txt">500 / 500 HP</p>
          </div>
        </div>
        <div class="healthbar-container">
          <!-- warrior-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar warrior-health"></div>
          <div class="text-container">
            <p id="warrior-name-txt">Warriorens navn</p>
            <p id="warrior-health-txt">600 / 600 HP</p>
          </div>
        </div>
      </div>

      <!-- Healthbar til fienden -->
      <div class="dragon-health-container">
        <div class="healthbar-container">
          <!-- dragon-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar dragon-health"></div>
          <div class="text-container">
            <p id="dragon-name-txt">Dragens navn</p>
            <div class="text-container dragon-health-txt">2000 / 2000 HP</div>
          </div>
        </div>
      </div>

      <!-- Bildecontainere for heroene -->
      <div class="img-container healer">
        <img class="hero" src="assets/healer.png" />
      </div>
      <div class="img-container archer">
        <img class="hero" src="assets/archer.png" />
      </div>
      <div class="img-container warrior">
        <img class="hero" src="assets/warrior.png" />
      </div>

      <!-- Bildecontainer for fienden -->
      <div class="enemy-container">
        <div class="img-container dragon-container">
          <img class="dragon" src="assets/dragon.png" />
        </div>
      </div>
    </div>
    <script>
      //Names:
      //Påkrevde teknikker: alert, function, onclick/eventListener, manipulering av array-objekter:
      document.addEventListener("DOMContentLoaded", function () {
        let healerNameTxt = document.getElementById("healer-name-txt");
        healerNameTxt.textContent = "Henriette Healer";

        let archerNameTxt = document.getElementById("archer-name-txt");
        archerNameTxt.textContent = "Ariana archer";

        let warriorNameTxt = document.getElementById("warrior-name-txt");
        warriorNameTxt.textContent = "Wyona Warrior";

        let dragonNameTxt = document.getElementById("dragon-name-txt");
        dragonNameTxt.textContent = "Daar Dragon";
      });

      //Stats for heroes
      let heroesArray = [
        {
          id: 0,
          name: "Henriette Healer",
          maxHP: 400,
          currentHP: 400,
          damage: 100,
          alive: true,
        },
        {
          id: 1,
          name: "Ariana archer",
          maxHP: 500,
          currentHP: 500,
          damage: 400,
          alive: true,
        },
        {
          id: 2,
          name: "Wyona Warrior",
          maxHP: 600,
          currentHP: 600,
          damage: 400,
          alive: true,
        },
      ];

      let dragonObject = {
        name: "Daar Dragon",
        maxHP: 2000,
        currentHP: 2000,
        damage: 200,
        alive: true,
      };
      //Health txt for each hero:
      const healerHealthTxt = document.getElementById("healer-health-txt");
      const archerHealthTxt = document.getElementById("archer-health-txt");
      const warriorHealthTxt = document.getElementById("warrior-health-txt");
      //Update healthinformasion for each hero:
      function updateHeroHealthText() {
        healerHealthTxt.textContent = `${heroesArray[0].currentHP} / ${heroesArray[0].maxHP} HP`;
        archerHealthTxt.textContent = `${heroesArray[1].currentHP} / ${heroesArray[1].maxHP} HP`;
        warriorHealthTxt.textContent = `${heroesArray[2].currentHP} / ${heroesArray[2].maxHP} HP`;
      }
      //Update healthinformasion for dragon:
      const dragonHealthTxt = document.querySelector(".dragon-health-txt");
      function updateDragonHealthText() {
        dragonHealthTxt.textContent = `${dragonObject.currentHP} / ${dragonObject.maxHP} HP`;
      }

      // Attack from Hero's:
      function attackDragon(heroIndex) {
        const hero = heroesArray[heroIndex];
        const heroName = hero.name;
        const heroDamage = hero.damage;

        // Do damage on the dragon
        dragonObject.currentHP -= heroDamage;

        // check if dragon is still alive:
        if (dragonObject.currentHP <= 0) {
          dragonObject.currentHP = 0;
          dragonObject.alive = false;
        }

        // Update the dragon's health display:
        updateDragonHealthText();

        // Display the message:
        const message = `${heroName} har gjort ${heroDamage} skade på ${dragonObject.name}`;
        alert(message);

        dragonCounterAttack();
      }

      function dragonCounterAttack() {
        const aliveHeroes = heroesArray.filter((hero) => hero.alive);
        let targetHero;

        if (aliveHeroes.length > 0) {
          //choose a random hero to attack
          const randomTargetHero = Math.floor(
            Math.random() * aliveHeroes.length
          );
          targetHero = aliveHeroes[randomTargetHero];
        }

        const dragonAttackDamage = dragonObject.damage;
        targetHero.currentHP -= dragonAttackDamage;

        //Update health info for the RandomTargeted hero:

        updateHeroHealthText();

        // Check if the targeted hero is dead:
        if (targetHero.currentHP <= 0) {
          targetHero.currentHP = 0;
          targetHero.alive = false;
        }

        // Display message when the dragon makes counter attack:
        const counterAttackMessage = `${dragonObject.name} har angrepet ${targetHero.name}!`;
        alert(counterAttackMessage);
      }
      // Add click listener for each hero
      document
        .querySelector(".img-container.healer")
        .addEventListener("click", function () {
          attackDragon(0);
        });
      document
        .querySelector(".img-container.archer")
        .addEventListener("click", function () {
          attackDragon(1);
        });
      document
        .querySelector(".img-container.warrior")
        .addEventListener("click", function () {
          attackDragon(2);
        });
    </script>
  </body>
</html>
